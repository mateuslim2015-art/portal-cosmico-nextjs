
import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcryptjs'

const prisma = new PrismaClient()

// URLs of all 78 tarot card images
const generatedCardImages = {
  // Arcanos Maiores (22 cartas)
  'The Fool': 'https://cdn.abacus.ai/images/d9490f23-bef7-4c4f-ad18-cd82dde7fa0d.png',
  'The Magician': 'https://cdn.abacus.ai/images/80ea978b-693a-439c-99f9-d782d0f9ad47.png',
  'The High Priestess': 'https://cdn.abacus.ai/images/5bc632ab-b0a0-48c6-849a-d7e6f3a65131.png',
  'The Empress': 'https://cdn.abacus.ai/images/1329a9a8-a7df-43a2-8177-342a772b2297.png',
  'The Emperor': 'https://cdn.abacus.ai/images/126fb25b-53bd-4323-9289-1be648213825.png',
  'The Hierophant': 'https://cdn.abacus.ai/images/21939ff3-1030-4e85-a038-db832ee10eb6.png',
  'The Lovers': 'https://cdn.abacus.ai/images/66790bd3-6f9a-42af-aebb-1c92a1a1efd1.png',
  'The Chariot': 'https://cdn.abacus.ai/images/51776645-b386-4b79-b779-5c9adf84cfd2.png',
  'Strength': 'https://cdn.abacus.ai/images/ffc62ad4-0398-43f1-b16a-42bd66d5282a.png',
  'The Hermit': 'https://cdn.abacus.ai/images/63c0949f-5d15-4615-8707-24ce8f31c408.png',
  'Wheel of Fortune': 'https://cdn.abacus.ai/images/7a5ce9e6-5b3c-47f8-8c32-849e142d6fed.png',
  'Justice': 'https://cdn.abacus.ai/images/3d70814b-1fe9-43fa-bf62-83a05a13de27.png',
  'The Hanged Man': 'https://cdn.abacus.ai/images/fc61de0f-9f8e-4897-a9e4-ee57bc0295d1.png',
  'Death': 'https://cdn.abacus.ai/images/904e27ad-ad48-4bbc-b2e1-e52f130b6f32.png',
  'Temperance': 'https://cdn.abacus.ai/images/5c3fa78f-6a3c-4cf5-b65c-0db13b472e58.png',
  'The Devil': 'https://cdn.abacus.ai/images/12b361e6-019a-432e-a38d-af7f6f3191a4.png',
  'The Tower': 'https://cdn.abacus.ai/images/c89718b9-a2ae-402f-88ac-2a0ef302ac52.png',
  'The Star': 'https://cdn.abacus.ai/images/70accb2f-0d06-46b1-89ac-1f5a53df070b.png',
  'The Moon': 'https://cdn.abacus.ai/images/37bff3fe-c52c-42b7-9860-220f1d2ad414.png',
  'The Sun': 'https://cdn.abacus.ai/images/27daf152-c5c7-4120-996a-b9fbeceb5156.png',
  'Judgement': 'https://cdn.abacus.ai/images/d02830e7-70b4-4341-ac45-56f20d96a4b3.png',
  'The World': 'https://cdn.abacus.ai/images/d3a47b62-3d21-4caf-902e-37f6df5444a5.png',
  
  // Copas (14 cartas)
  'Ace of Copas': 'https://cdn.abacus.ai/images/2bb60b20-ec2c-4274-b59e-27d407254082.jpg',
  'Two of Copas': 'https://cdn.abacus.ai/images/02b37ede-4530-43c9-89d2-e688bfc4a595.jpg',
  'Three of Copas': 'https://cdn.abacus.ai/images/a141b2d7-20a7-4cb6-ad21-f452c6ae98bc.jpg',
  'Four of Copas': 'https://cdn.abacus.ai/images/960656d0-b627-45e2-8319-e0bfd2596b12.jpg',
  'Five of Copas': 'https://cdn.abacus.ai/images/b9ad1efb-1954-4120-8202-f21eeed7d8a1.jpg',
  'Six of Copas': 'https://cdn.abacus.ai/images/d0f48d64-cffd-42ec-aab6-447e583aaa85.jpg',
  'Seven of Copas': 'https://cdn.abacus.ai/images/96582c27-2d95-45ad-9b02-e5716c1fd8a8.jpg',
  'Eight of Copas': 'https://cdn.abacus.ai/images/3e1e9725-72c2-4ea0-981d-3f9259c42a8a.jpg',
  'Nine of Copas': 'https://cdn.abacus.ai/images/3c92c875-7c63-4232-94a5-e6f9ae83cb19.jpg',
  'Ten of Copas': 'https://cdn.abacus.ai/images/95971874-9d04-481c-b054-57232e5d5a37.jpg',
  'Page of Copas': 'https://cdn.abacus.ai/images/8b1addd5-9559-4e6a-acbb-a19f356d0258.jpg',
  'Knight of Copas': 'https://cdn.abacus.ai/images/11489a9c-20f5-463c-b3a6-debd6ca4500b.jpg',
  'Queen of Copas': 'https://cdn.abacus.ai/images/0cbb5f12-e519-4fe0-a45a-a251fee07589.jpg',
  'King of Copas': 'https://cdn.abacus.ai/images/0b92cc6d-91d9-493d-acaa-a3ea84a9d6cd.jpg',
  
  // Paus (14 cartas)
  'Ace of Paus': 'https://cdn.abacus.ai/images/d4abfbbc-e7cd-443f-97d5-74332230f002.jpg',
  'Two of Paus': 'https://cdn.abacus.ai/images/bf64575e-1213-443e-8989-dd7bb8dd80c8.png',
  'Three of Paus': 'https://cdn.abacus.ai/images/8e57b7e8-069a-411a-b792-c9085c9520f7.png',
  'Four of Paus': 'https://cdn.abacus.ai/images/60fe061e-43f1-4052-bd32-96c7898be180.png',
  'Five of Paus': 'https://cdn.abacus.ai/images/c38b5e57-24bf-418a-ae73-b92da1a12bbd.png',
  'Six of Paus': 'https://cdn.abacus.ai/images/50533e18-52bb-4a72-b98e-7472478f2995.png',
  'Seven of Paus': 'https://cdn.abacus.ai/images/44e0fe49-08e4-4c96-a83b-24b120b7f31e.png',
  'Eight of Paus': 'https://cdn.abacus.ai/images/096c19cd-4c67-4859-9c42-da49a5e04e19.png',
  'Nine of Paus': 'https://cdn.abacus.ai/images/81a6614f-c3c7-4c54-9f82-f95fc4c21b3b.png',
  'Ten of Paus': 'https://cdn.abacus.ai/images/5ef68cf6-7e58-48f0-a010-749e748acd1e.png',
  'Page of Paus': 'https://cdn.abacus.ai/images/74fc1cca-7243-44d1-9364-15c387ede344.png',
  'Knight of Paus': 'https://cdn.abacus.ai/images/80b6c73f-e28f-44ec-b121-a1a55498116a.png',
  'Queen of Paus': 'https://cdn.abacus.ai/images/802145f3-1faa-4e3f-9698-f11ad35ff049.png',
  'King of Paus': 'https://cdn.abacus.ai/images/39671998-9057-4155-87c8-f2b538ca0da6.png',
  
  // Espadas (14 cartas)
  'Ace of Espadas': 'https://cdn.abacus.ai/images/3f767a40-a525-4459-aa4a-1c4b6dcb36a7.png',
  'Two of Espadas': 'https://cdn.abacus.ai/images/4b2e3bbb-4a81-46a3-a5fd-ec705cd5b88c.png',
  'Three of Espadas': 'https://cdn.abacus.ai/images/679f0dec-ef39-4257-97b6-63888205ebea.png',
  'Four of Espadas': 'https://cdn.abacus.ai/images/8c102442-32d1-4d5b-a54d-082e6f0bd371.png',
  'Five of Espadas': 'https://cdn.abacus.ai/images/e0638128-4806-4860-be5f-acb141c9f520.png',
  'Six of Espadas': 'https://cdn.abacus.ai/images/fbbceb20-b45f-4400-a658-710ea6721eb3.png',
  'Seven of Espadas': 'https://cdn.abacus.ai/images/039c75a8-f73c-4d40-96ff-e84333e9c2d7.png',
  'Eight of Espadas': 'https://cdn.abacus.ai/images/611444d2-e049-4307-9416-9b8b391f31b9.png',
  'Nine of Espadas': 'https://cdn.abacus.ai/images/184fa7d8-2e1c-4059-8134-282c3a79bc8c.png',
  'Ten of Espadas': 'https://cdn.abacus.ai/images/57949866-3cd2-460d-9444-3d8f40e9fff5.png',
  'Page of Espadas': 'https://cdn.abacus.ai/images/001aab5d-7e25-4321-9ac2-4491d010920c.png',
  'Knight of Espadas': 'https://cdn.abacus.ai/images/3fda3d69-1fbf-4e18-af9e-9e258105156f.png',
  'Queen of Espadas': 'https://cdn.abacus.ai/images/c7bc14d5-7c48-40d5-b03f-5f751a4a804a.png',
  'King of Espadas': 'https://cdn.abacus.ai/images/2a020f65-a521-48d8-a7a5-1914ce41ebc7.png',
  
  // Ouros (14 cartas)
  'Ace of Ouros': 'https://cdn.abacus.ai/images/68e3ab59-b4fc-4fa5-ad7e-21ce34d9c452.png',
  'Two of Ouros': 'https://cdn.abacus.ai/images/220b0747-4929-456f-9f37-0bcf6b83839a.png',
  'Three of Ouros': 'https://cdn.abacus.ai/images/574e465f-c59b-406e-be35-367139b09483.png',
  'Four of Ouros': 'https://cdn.abacus.ai/images/9df70bef-35c7-423f-9a50-e2ef839da7b5.png',
  'Five of Ouros': 'https://cdn.abacus.ai/images/0a5b824a-c442-41ad-b7b1-149c25efbd87.png',
  'Six of Ouros': 'https://cdn.abacus.ai/images/b8fb17a0-52e3-4832-b623-abd6fdb2020f.png',
  'Seven of Ouros': 'https://cdn.abacus.ai/images/935a9a7f-7efc-4223-ac51-d4bbe449acfa.png',
  'Eight of Ouros': 'https://cdn.abacus.ai/images/1f2bc709-b392-4326-a303-c50c6c9c6844.png',
  'Nine of Ouros': 'https://cdn.abacus.ai/images/d358e33a-d4f8-47e1-8d65-502488f68c78.png',
  'Ten of Ouros': 'https://cdn.abacus.ai/images/36ad35d8-6605-41b2-bf05-51866b1b2fe2.png',
  'Page of Ouros': 'https://cdn.abacus.ai/images/e919386c-689a-41fb-87d0-a51d1db333f0.png',
  'Knight of Ouros': 'https://cdn.abacus.ai/images/1e179bf2-05cc-44b2-bae8-91946792ef36.png',
  'Queen of Ouros': 'https://cdn.abacus.ai/images/d5040bda-ac39-4a16-82d6-c55b80197603.png',
  'King of Ouros': 'https://cdn.abacus.ai/images/d0bd1539-9714-42d0-86a9-c35a585eaf11.png',
}

const placeholderImage = 'https://cdn.abacus.ai/images/695088d7-f311-4d7a-ac7b-bcbf3fe8d480.png'

async function main() {
  console.log('Starting database seed...')

  // Create admin user (required for testing)
  const hashedAdminPassword = await bcrypt.hash('johndoe123', 12)
  const adminUser = await prisma.user.upsert({
    where: { email: 'john@doe.com' },
    update: {},
    create: {
      email: 'john@doe.com',
      password: hashedAdminPassword,
      name: 'John Doe',
      trialStartDate: new Date(),
      trialEndsAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now
      trialUsed: false,
    },
  })
  console.log(`Created admin user: ${adminUser.email}`)

  // Seed Tarot Cards - Major Arcana
  const majorArcana = [
    {
      name: 'The Fool',
      number: 0,
      type: 'major',
      shortMeaning: 'Novos começos, inocência, espontaneidade, espírito livre',
      longMeaning: 'O Louco representa novos começos, tendo fé no futuro, sendo inexperiente, não conhecendo o que esperar, tendo o espírito livre, sendo corajoso e sem medo. A carta sugere que você tem uma escolha importante pela frente e deve seguir seus instintos.',
      keywords: ['novos começos', 'inocência', 'espontaneidade', 'jornada', 'potencial', 'liberdade'],
      element: 'Air',
      astrology: 'Urano',
    },
    {
      name: 'The Magician',
      number: 1,
      type: 'major',
      shortMeaning: 'Manifestação, força de vontade, desejo, criação, poder',
      longMeaning: 'O Mago representa manifestação, força de vontade, desejo de criar, tendo os recursos para ter sucesso. É uma carta de ação e indica que você tem o poder de manifestar seus desejos através da aplicação da sua vontade.',
      keywords: ['manifestação', 'poder', 'força de vontade', 'criação', 'habilidade', 'concentração'],
      element: 'Air',
      astrology: 'Mercúrio',
    },
    {
      name: 'The High Priestess',
      number: 2,
      type: 'major',
      shortMeaning: 'Intuição, sabedoria sagrada, consciência divina, feminina',
      longMeaning: 'A Sacerdotisa representa intuição, sabedoria sagrada e feminina, consciência divina. Ela sugere que você deve confiar na sua intuição e olhar além das aparências superficiais para encontrar a verdade.',
      keywords: ['intuição', 'mistério', 'sabedoria', 'feminino sagrado', 'subconsciência', 'espiritualidade'],
      element: 'Water',
      astrology: 'Lua',
    },
    {
      name: 'The Empress',
      number: 3,
      type: 'major',
      shortMeaning: 'Feminilidade, beleza, natureza, abundância, maternidade',
      longMeaning: 'A Imperatriz representa feminilidade, beleza, natureza, abundância, maternidade e fertilidade. Ela indica que você está em um período de crescimento criativo e abundância está chegando à sua vida.',
      keywords: ['abundância', 'fertilidade', 'maternidade', 'natureza', 'criatividade', 'beleza'],
      element: 'Earth',
      astrology: 'Vênus',
    },
    {
      name: 'The Emperor',
      number: 4,
      type: 'major',
      shortMeaning: 'Autoridade, estrutura, controle, paternidade, disciplina',
      longMeaning: 'O Imperador representa autoridade, estrutura, controle e paternidade. Ele sugere que você precisa tomar controle da situação através de liderança forte e disciplina.',
      keywords: ['autoridade', 'liderança', 'paternidade', 'estrutura', 'disciplina', 'controle'],
      element: 'Fire',
      astrology: 'Áries',
    },
    {
      name: 'The Hierophant',
      number: 5,
      type: 'major',
      shortMeaning: 'Tradição, conformidade, moralidade, ética, orientação',
      longMeaning: 'O Hierofante representa tradição, conformidade, moralidade, ética e orientação espiritual. Ele sugere buscar conhecimento através de tradições estabelecidas e instituições.',
      keywords: ['tradição', 'espiritualidade', 'orientação', 'conformidade', 'instituições', 'moralidade'],
      element: 'Earth',
      astrology: 'Touro',
    },
    {
      name: 'The Lovers',
      number: 6,
      type: 'major',
      shortMeaning: 'Amor, união, relacionamentos, valores, escolhas',
      longMeaning: 'Os Amantes representam amor, união, relacionamentos e escolhas importantes sobre valores. A carta sugere que você está enfrentando uma escolha moral ou ética importante.',
      keywords: ['amor', 'relacionamentos', 'união', 'escolhas', 'valores', 'harmonia'],
      element: 'Air',
      astrology: 'Gêmeos',
    },
    {
      name: 'The Chariot',
      number: 7,
      type: 'major',
      shortMeaning: 'Controle, força de vontade, sucesso, determinação, direção',
      longMeaning: 'O Carro representa controle, força de vontade, sucesso e determinação. Sugere que através de confiança e força de vontade, você pode superar obstáculos e alcançar seus objetivos.',
      keywords: ['vitória', 'controle', 'determinação', 'força de vontade', 'progresso', 'sucesso'],
      element: 'Water',
      astrology: 'Câncer',
    },
    {
      name: 'Strength',
      number: 8,
      type: 'major',
      shortMeaning: 'Força interior, coragem, paciência, compaixão, autocontrole',
      longMeaning: 'A Força representa força interior, coragem, paciência e compaixão. Sugere que você pode superar desafios através de força interior e gentileza, não força bruta.',
      keywords: ['força interior', 'coragem', 'compaixão', 'paciência', 'gentileza', 'autocontrole'],
      element: 'Fire',
      astrology: 'Leão',
    },
    {
      name: 'The Hermit',
      number: 9,
      type: 'major',
      shortMeaning: 'Introspecção, busca interior, orientação, solidão sábia',
      longMeaning: 'O Eremita representa introspecção, busca da verdade interior e orientação espiritual. Sugere um período de autorreflexão e busca por respostas dentro de si mesmo.',
      keywords: ['introspecção', 'sabedoria', 'orientação', 'busca interior', 'solidão', 'iluminação'],
      element: 'Earth',
      astrology: 'Virgem',
    },
    {
      name: 'Wheel of Fortune',
      number: 10,
      type: 'major',
      shortMeaning: 'Boa sorte, karma, ciclos de vida, destino, mudanças',
      longMeaning: 'A Roda da Fortuna representa boa sorte, karma, ciclos de vida e mudanças inevitáveis. Sugere que mudanças estão chegando e você deve estar preparado para se adaptar.',
      keywords: ['destino', 'ciclos', 'mudanças', 'boa sorte', 'karma', 'oportunidade'],
      element: 'Fire',
      astrology: 'Júpiter',
    },
    {
      name: 'Justice',
      number: 11,
      type: 'major',
      shortMeaning: 'Justiça, equilíbrio, verdade, causa e efeito, lei',
      longMeaning: 'A Justiça representa justiça, equilíbrio, verdade e causa e efeito. Sugere que você deve tomar decisões baseadas em equilíbrio e considerar as consequências de suas ações.',
      keywords: ['justiça', 'equilíbrio', 'verdade', 'lei', 'responsabilidade', 'imparcialidade'],
      element: 'Air',
      astrology: 'Libra',
    },
    {
      name: 'Death',
      number: 13,
      type: 'major',
      shortMeaning: 'Transformação, fim de ciclos, renascimento, mudança',
      longMeaning: 'A Morte representa transformação, fim de ciclos e renascimento. Não significa morte literal, mas sim o fim de uma fase da vida e o início de outra.',
      keywords: ['transformação', 'mudança', 'fim de ciclo', 'renascimento', 'renovação', 'transição'],
      element: 'Water',
      astrology: 'Escorpião',
    },
  ]

  // Add remaining major arcana cards (placeholder data)
  const remainingMajorArcana = [
    { name: 'The Hanged Man', number: 12, shortMeaning: 'Suspensão, rendição, nova perspectiva', longMeaning: 'O Enforcado representa suspensão, rendição e ver as coisas de uma nova perspectiva.' },
    { name: 'Temperance', number: 14, shortMeaning: 'Equilíbrio, moderação, paciência, propósito', longMeaning: 'A Temperança representa equilíbrio, moderação e paciência.' },
    { name: 'The Devil', number: 15, shortMeaning: 'Vícios, vínculos, materialism, ignorância', longMeaning: 'O Diabo representa vícios, limitações autoimposta e materialismo.' },
    { name: 'The Tower', number: 16, shortMeaning: 'Mudança súbita, destruição, revelação', longMeaning: 'A Torre representa mudanças súbitas e revelações chocantes.' },
    { name: 'The Star', number: 17, shortMeaning: 'Esperança, fé, propósito, renovação, espiritualidade', longMeaning: 'A Estrela representa esperança, fé e renovação espiritual.' },
    { name: 'The Moon', number: 18, shortMeaning: 'Ilusão, medo, ansiedade, subconsciente', longMeaning: 'A Lua representa ilusões, medos e o poder do subconsciente.' },
    { name: 'The Sun', number: 19, shortMeaning: 'Alegria, sucesso, celebração, positividade', longMeaning: 'O Sol representa alegria, sucesso e positividade.' },
    { name: 'Judgement', number: 20, shortMeaning: 'Julgamento, renascimento, despertar interior', longMeaning: 'O Julgamento representa renascimento e despertar espiritual.' },
    { name: 'The World', number: 21, shortMeaning: 'Completude, realização, viagem, sucesso', longMeaning: 'O Mundo representa completude, realização e sucesso.' },
  ].map(card => ({
    ...card,
    type: 'major' as const,
    keywords: ['transformação', 'espiritualidade'],
    element: 'Universal',
    astrology: 'Universal',
  }))

  // Create all major arcana cards
  for (const cardData of [...majorArcana, ...remainingMajorArcana]) {
    const imageUrl = generatedCardImages[cardData.name as keyof typeof generatedCardImages] || placeholderImage
    
    await prisma.tarotCard.upsert({
      where: { name: cardData.name },
      update: {},
      create: {
        ...cardData,
        suit: null,
        imageUrl,
      },
    })
  }

  console.log('Created Major Arcana cards')

  // Minor Arcana - simplified version for MVP
  const suits = [
    { name: 'cups', displayName: 'Copas', element: 'Water' },
    { name: 'wands', displayName: 'Paus', element: 'Fire' },
    { name: 'swords', displayName: 'Espadas', element: 'Air' },
    { name: 'pentacles', displayName: 'Ouros', element: 'Earth' },
  ]

  const courtCards = ['Page', 'Knight', 'Queen', 'King']
  const numberCards = ['Ace', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten']

  for (const suit of suits) {
    // Number cards (1-10)
    for (let i = 0; i < numberCards.length; i++) {
      const number = numberCards[i]
      const cardName = `${number} of ${suit.displayName}`
      
      await prisma.tarotCard.upsert({
        where: { name: cardName },
        update: {},
        create: {
          name: cardName,
          number: i + 1,
          suit: suit.name,
          type: 'minor',
          imageUrl: placeholderImage,
          shortMeaning: `Energia do ${number} no naipe de ${suit.displayName}`,
          longMeaning: `Esta carta representa as energias e características específicas do ${number} no contexto do elemento ${suit.element} e naipe ${suit.displayName}.`,
          keywords: [suit.element.toLowerCase(), 'minor arcana', suit.name],
          element: suit.element,
          astrology: null,
        },
      })
    }

    // Court cards
    for (const court of courtCards) {
      const cardName = `${court} of ${suit.displayName}`
      
      await prisma.tarotCard.upsert({
        where: { name: cardName },
        update: {},
        create: {
          name: cardName,
          number: null,
          suit: suit.name,
          type: 'minor',
          imageUrl: placeholderImage,
          shortMeaning: `${court} - personalidade e energias no naipe de ${suit.displayName}`,
          longMeaning: `O ${court} representa aspectos de personalidade e energias específicas relacionadas ao elemento ${suit.element} e naipe ${suit.displayName}.`,
          keywords: [court.toLowerCase(), suit.element.toLowerCase(), 'court card'],
          element: suit.element,
          astrology: null,
        },
      })
    }
  }

  console.log('Created Minor Arcana cards')
  console.log('Database seed completed successfully!')
}

main()
  .catch((e) => {
    console.error(e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
